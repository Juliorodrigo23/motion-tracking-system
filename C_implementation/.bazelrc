# Basic build settings
build --jobs 8
build --define='absl=1'

# macOS specific settings
build --apple_platform_type=macos
build --macos_minimum_os=13.0
build --cxxopt=-std=c++17
build --host_cxxopt=-std=c++17
build --define MEDIAPIPE_DISABLE_GPU=1

# M3 Mac specific
build:macos --cpu=darwin_arm64
build:macos --copt=-mmacosx-version-min=13.0

# Build only what we need
build --spawn_strategy=local
build --genrule_strategy=local
build --define=use_opencv=true

# Memory management
build --local_ram_resources=HOST_RAM*.8
build --local_cpu_resources=HOST_CPUS-2